inicio
    : Encabezado EOF
    ;
Encabezado
    : Import
    | CrearClase
    | Encabezado CrearClase
    | Encabezado Estruct
    ;
Import
    : Importar 
    | Import Importar
    ;
Importar
    : IMPORTAR '(' STRING_LIT ')' ';'
    ;
CrearClase
    : Clase '}'
    ;
Herencia
    :'{'
    | HEREDADE ID '{'
    ;
Clase
    : CLASE ID Herencia
    | Clase CuerpoClase
    ;
CuerpoClase
    : DeclaracionClase 
    | SobreEscribir
    | Estruct
    ;
DeclaracionClase
    : Visibilidad Declaracion
    | Declaracion
    ;
Estruct
    : Cuerpo_Estruct ']' ';'
    ;
Cuerpo_Estruct
    : ESTRUCTURA '['
    | Cuerpo_Estruct Declaracion
    ;
Declaracion
    : Tipo var AsignarValor 
    | ID var AsignarValor 
    ;
var  
    : ID
    | var '[' e ']' 
    | ESTE '.'  ID
    ;
AsignarValor
    :';'
    |'=' e ';'
    |'=' Nuevo ';'
    |'=' Lista ';'
    ;
Nuevo
    : NUEVO getMetodo
    ;

Visibilidad
    : PUBLICO
    | PRIVADO
    | PROTEGIDO
    ;
Tipo
    :INTEGER
    |BOOLEAN
    |CHAR
    |DOUBLE
   /* |ID */
    |VACIO 
    |FUNCION
    |LISTA
    |PILA
    |COLA
    ;
  
CrearMetodo
    : Visibilidad Metodo '}'
    | Metodo '}'
    ;
SobreEscribir
    : SOBREESCRIBIR CrearMetodo
    |CrearMetodo
    ;
Metodo
    : Tipo ID '(' Parametros '{'
    | ID ID '(' Parametros '{'
    | Metodo  CuerpoMetodo
    ;
Parametros
    : Parametro ')' 
    |  ')'
    ;
Parametro
    : Tipo ID 
    | ID ID 
    | Parametro ',' Tipo ID
    | Parametro ',' ID ID 
    ;
CuerpoMetodo
    : Declaracion
    | Asignacion
    | getMetodoZ ';'
    | Control
    | Branching ';'
    ;
   
Asignacion
    : var '=' e ';'
    | Navegar var '=' e ';'
    |'+=' e ';'
    |'*=' e ';'
    |'/=' e ';'
    | '++' ';' 
    | '--' ';'
    | var '=' Nuevo ';'
   ;
Navegar
    : var '.'
    | var '->'
    | getMetodo '.'
    | getMetodo '->'
    | Navegar var '.'
    | Navegar  getMetodo '.'
    | Navegar var '->'
    | Navegar  getMetodo '->'
    ;
Control
    : If1
    | If2
    | Switch
    | While
    | Do_While
    | Repeat_Until
    | For
    | Loop
    | Count
    | Doble_Condicion
    ;

If1
    :IF Expresion ESVERDADERO  Cuerpo  ESFALSO Cuerpo FINSI
    ;
If2 
    :IF Expresion ESVERDADERO  Cuerpo  ESFALSO Expresion Cuerpo FINSI
    ;
Switch 
    : SWITCH   Expresion '{' CuerpoSwitch Default 
    ;
Default
    : DEFAULT ':' Cuerpo1 '}'
    | '}'
    ;
Cuerpo: '{'Cuerpo1 '}'
    | '{' '}'
    ;
Cuerpo1
    :Cuerpo1 CuerpoMetodo
    |CuerpoMetodo
    ;

CuerpoSwitch
    : CuerpoSwitch Caso
    | Caso
    ;
Caso
    : CASE e ':' Cuerpo1
    ;
Branching
    : BREAK
    | BREAK ID
    | CONTINUE
    | RETURN
    | RETURN e
    ;
Expresion
    : '(' e ')'
    ;
Do_While
    : DO Cuerpo WHILE Expresion
    ;
Doble_Condicion: DOBLE_CONDICION '(' e ',' e ')'Cuerpo
    ;
Repeat_Until
    : REAPEAT Cuerpo UNTIL Expresion
    ; 
For
    : FOR '('VARIABLE':' Asignacion ';' DESDE':' e ';' HASTA ':' e ')' Cuerpo
    ;
Loop
    : LOOP ID Cuerpo
    ;
Count
    : COUNT Expresion Cuerpo
    ;
Repetir
    :REPETIR_MIENTRAS Expresion  Cuerpo
    ;
Principal
    : PRINCIPAL '(' ')' Cuerpo
    ;
getMetodoZ 
    : Navegar  getMetodo  
    | getMetodo 
    ;
getMetodo
    : ID '(' getParametro
    | Primitivas '(' getParametro
    | Tipo '(' getParametro
    ;
getParametro 
    : ParametroM ')'
    | ')'
    ;
ParametroM 
    : ParametroM ',' e
    | ParametroM ',' Tipo
    | e
    | Tipo
    ;
Primitivas
    :IMPRIMIR
    |CONCATENAR
    |CONVERTIRCADENA
    |CONVERTIRENTERO
    |CREARPUNTERO
    |OBTERNERDIRECCION
    |RESERVAMEMORIA
    |CONSULTARTAMANIO
    |TECLADO
    ;
e
    : e '+' e
    | e '-' e
    | e '*' e
    | e '/' e
    | e '%' e
    | e '^' e
    | '-' e /*prec UMINUS*/
    | '(' e ')'
    | e '<' e
    | e '>' e
    | e '<=' e
    | e '>=' e
    | e '==' e
    | e '!=' e
    | e '&&' e
    | e '||' e
    | e '??' e
    | '!' e
    | Datos
    | NULL 
    ;
Lista
    : List '}'
    ;
List
    : '{' DefList
    | List ',' DefList
    ;
DefList
    : e
    | Lista
    ;

Datos 
    : NUMBERLIST
    | Identi
    | STRINGLIST  
    | TRUE
    | FALSE
    ;
Identi
    :var
    |getMetodo
    |Identi '->' var
    |Identi '->' getMetodo
    |Identi '.' var
    |Identi '.' getMetodo
    ;   